<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>会员中心 - 美图欣赏</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <button class="back-to-top">↑</button>
    <button class="theme-toggle">切换主题</button>

    <div class="container">
        <div class="gallery-header">
            <h1 class="gallery-title">会员中心</h1>
            <p class="gallery-subtitle">尊享会员特权</p>
        </div>

        <!-- 会员密码验证 -->
        <div class="member-verify">
            <div class="verify-form">
                <h3>会员验证</h3>
                <p>输入会员密码解锁全部图片</p>
                <div class="form-group">
                    <input type="password" id="member-password" placeholder="请输入会员密码">
                    <button id="verify-btn" class="verify-btn">验证</button>
                </div>
                <p class="verify-status"></p>
            </div>
        </div>

        <div class="member-settings">
            <div class="settings-tabs">
                <button class="settings-tab active" data-tab="profile">个人信息</button>
                <button class="settings-tab" data-tab="preferences">偏好设置</button>
                <button class="settings-tab" data-tab="security">账户安全</button>
            </div>

            <div class="settings-content">
                <!-- 个人信息设置 -->
                <div class="settings-panel active" id="profile">
                    <h3>个人信息设置</h3>
                    <form class="settings-form">
                        <div class="form-group">
                            <label for="username">用户名</label>
                            <input type="text" id="username" value="用户123456">
                        </div>
                        <div class="form-group">
                            <label for="nickname">昵称</label>
                            <input type="text" id="nickname" value="美图爱好者">
                        </div>
                        <div class="form-group">
                            <label for="email">邮箱</label>
                            <input type="email" id="email" value="example@example.com">
                        </div>
                        <div class="form-group">
                            <label for="avatar">头像</label>
                            <div class="avatar-upload">
                                <img src="image/周叽是可爱兔兔 体操服 [31P]/1.jpg" alt="用户头像" class="avatar-preview">
                                <input type="file" id="avatar" accept="image/*">
                                <button type="button" class="upload-btn">更换头像</button>
                            </div>
                        </div>
                        <button type="submit" class="save-btn">保存更改</button>
                    </form>
                </div>

                <!-- 偏好设置 -->
                <div class="settings-panel" id="preferences">
                    <h3>偏好设置</h3>
                    <form class="settings-form">
                        <div class="form-group">
                            <label>主题偏好</label>
                            <div class="theme-options">
                                <label class="theme-option">
                                    <input type="radio" name="theme" value="light" checked>
                                    <span>浅色主题</span>
                                </label>
                                <label class="theme-option">
                                    <input type="radio" name="theme" value="dark">
                                    <span>深色主题</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>图片质量</label>
                            <div class="quality-options">
                                <label class="quality-option">
                                    <input type="radio" name="quality" value="high" checked>
                                    <span>高质量</span>
                                </label>
                                <label class="quality-option">
                                    <input type="radio" name="quality" value="medium">
                                    <span>中等质量</span>
                                </label>
                                <label class="quality-option">
                                    <input type="radio" name="quality" value="low">
                                    <span>低质量</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>通知设置</label>
                            <div class="notification-options">
                                <label class="notification-option">
                                    <input type="checkbox" name="notifications" value="email" checked>
                                    <span>邮件通知</span>
                                </label>
                                <label class="notification-option">
                                    <input type="checkbox" name="notifications" value="message" checked>
                                    <span>站内消息</span>
                                </label>
                                <label class="notification-option">
                                    <input type="checkbox" name="notifications" value="promotion">
                                    <span>促销信息</span>
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="save-btn">保存设置</button>
                    </form>
                </div>

                <!-- 账户安全设置 -->
                <div class="settings-panel" id="security">
                    <h3>账户安全</h3>
                    <form class="settings-form">
                        <div class="form-group">
                            <label for="current-password">当前密码</label>
                            <input type="password" id="current-password">
                        </div>
                        <div class="form-group">
                            <label for="new-password">新密码</label>
                            <input type="password" id="new-password">
                        </div>
                        <div class="form-group">
                            <label for="confirm-password">确认新密码</label>
                            <input type="password" id="confirm-password">
                        </div>
                        <div class="form-group">
                            <label>安全选项</label>
                            <div class="security-options">
                                <label class="security-option">
                                    <input type="checkbox" name="security" value="two-factor" checked>
                                    <span>双重认证</span>
                                </label>
                                <label class="security-option">
                                    <input type="checkbox" name="security" value="login-alert" checked>
                                    <span>登录提醒</span>
                                </label>
                            </div>
                        </div>
                        <button type="submit" class="save-btn">更新密码</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="member-grid">
            <div class="member-card">
                <div class="member-header">
                    <h3>普通会员</h3>
                    <p class="member-price">免费</p>
                </div>
                <ul class="member-features">
                    <li>浏览基础图片</li>
                    <li>每日下载限制</li>
                    <li>基础图片编辑</li>
                </ul>
                <button class="member-button">立即加入</button>
            </div>

            <div class="member-card featured">
                <div class="member-header">
                    <h3>高级会员</h3>
                    <p class="member-price">¥29.9/月</p>
                </div>
                <ul class="member-features">
                    <li>无限制浏览所有图片</li>
                    <li>无限制下载</li>
                    <li>高级图片编辑工具</li>
                    <li>优先客服支持</li>
                </ul>
                <button class="member-button" onclick="window.location.href='beidu.com'">立即升级</button>
            </div>

            <div class="member-card">
                <div class="member-header">
                    <h3>专业会员</h3>
                    <p class="member-price">¥99.9/月</p>
                </div>
                <ul class="member-features">
                    <li>所有高级会员特权</li>
                    <li>独家图片资源</li>
                    <li>专业图片处理工具</li>
                    <li>24小时专属客服</li>
                    <li>定制化服务</li>
                </ul>
                <button class="member-button" onclick="window.location.href='beidu.com'">立即升级</button>
            </div>
        </div>

        <div class="member-benefits">
            <h2>会员特权</h2>
            <div class="benefits-grid">
                <div class="benefit-item">
                    <span class="benefit-icon">📥</span>
                    <h3>无限下载</h3>
                    <p>无限制下载所有高清图片</p>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">🎨</span>
                    <h3>高级编辑</h3>
                    <p>使用专业图片编辑工具</p>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">🔒</span>
                    <h3>独家资源</h3>
                    <p>访问会员专属图片库</p>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">💬</span>
                    <h3>专属客服</h3>
                    <p>24小时优先客服支持</p>
                </div>
            </div>
        </div>
    </div>

    <!-- 底部导航 -->
    <!-- 底部导航 -->
    <footer class="bottom-nav">
        <a href="#" class="nav-item" id="homeLink">
            <span class="nav-icon">🏠</span>
            <span class="nav-text">首页</span>
        </a>
        <a href="news.html" class="nav-item" onclick="localStorage.setItem('lastPageType', 'news')">
            <span class="nav-icon">📰</span>
            <span class="nav-text">新闻</span>
        </a>
        <a href="member.html" class="nav-item active">
            <span class="nav-icon">👤</span>
            <span class="nav-text">会员</span>
        </a>
    </footer>


    <script>
        // 主题切换功能
        const themeToggle = document.querySelector('.theme-toggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
        });

        // 返回顶部功能
        const backToTop = document.querySelector('.back-to-top');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTop.style.display = 'block';
            } else {
                backToTop.style.display = 'none';
            }
        });

        backToTop.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // 设置标签切换
        const tabs = document.querySelectorAll('.settings-tab');
        const panels = document.querySelectorAll('.settings-panel');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                // 移除所有标签和面板的active类
                tabs.forEach(t => t.classList.remove('active'));
                panels.forEach(p => p.classList.remove('active'));

                // 为当前点击的标签和对应的面板添加active类
                tab.classList.add('active');
                const panelId = tab.getAttribute('data-tab');
                document.getElementById(panelId).classList.add('active');
            });
        });

        // 头像上传预览
        const avatarInput = document.querySelector('#avatar');
        const avatarPreview = document.querySelector('.avatar-preview');

        avatarInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    avatarPreview.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        // 表单提交处理
        const forms = document.querySelectorAll('.settings-form');
        forms.forEach(form => {
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                // 这里可以添加表单验证和提交逻辑
                alert('设置已保存！');
            });
        });

        // 会员密码验证功能
        const memberPassword = document.getElementById('member-password');
        const verifyBtn = document.getElementById('verify-btn');
        const verifyStatus = document.querySelector('.verify-status');
        const MEMBER_PASSWORD = '123456'; // 实际应用中应该使用更安全的密码存储方式

        // 页面加载时检查密码是否已更改，如果更改了则清除会员状态
        document.addEventListener('DOMContentLoaded', function () {
            const savedPasswordVersion = localStorage.getItem('passwordVersion');
            const currentPasswordVersion = MEMBER_PASSWORD; // 使用当前密码作为版本标识

            // 如果密码版本不匹配，说明后台密码已更改
            if (savedPasswordVersion !== currentPasswordVersion) {
                // 清除会员状态
                localStorage.setItem('isMember', 'false');
                // 更新密码版本
                localStorage.setItem('passwordVersion', currentPasswordVersion);
                // 清除旧的保存密码
                localStorage.removeItem('memberPassword');

                // 更新状态显示
                if (verifyStatus) {
                    verifyStatus.textContent = '会员密码已更新，请重新验证';
                    verifyStatus.style.color = 'orange';
                }
            }

            // 检查会员状态
            checkMemberStatus();
        });

        verifyBtn.addEventListener('click', () => {
            const inputPassword = memberPassword.value;

            // 直接使用当前代码中的密码进行验证，不再使用localStorage中的旧密码
            if (inputPassword === MEMBER_PASSWORD) {
                verifyStatus.textContent = '验证成功！已解锁全部图片';
                verifyStatus.style.color = 'green';
                localStorage.setItem('isMember', 'true');
                localStorage.setItem('passwordVersion', MEMBER_PASSWORD); // 保存当前密码版本
                // 更新图片访问权限
                updateImageAccess();
            } else {
                verifyStatus.textContent = '密码错误，请重试';
                verifyStatus.style.color = 'red';
                localStorage.setItem('isMember', 'false');
            }
        });

        // 检查会员状态
        function checkMemberStatus() {
            const isMember = localStorage.getItem('isMember') === 'true';
            if (isMember) {
                verifyStatus.textContent = '您已解锁全部图片';
                verifyStatus.style.color = 'green';
                memberPassword.value = '';
            }
            return isMember;
        }

        // 在账户安全设置中添加修改密码功能
        const securityForm = document.querySelector('#security form');
        securityForm.addEventListener('submit', (e) => {
            e.preventDefault();

            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;

            // 验证当前密码是否正确（使用代码中的MEMBER_PASSWORD）
            if (currentPassword !== MEMBER_PASSWORD) {
                alert('当前密码不正确！');
                return;
            }

            if (newPassword !== confirmPassword) {
                alert('两次输入的新密码不一致！');
                return;
            }

            // 不再保存新密码到localStorage，而是提示用户需要修改代码
            alert('密码修改功能仅供演示。在实际应用中，您需要修改代码中的MEMBER_PASSWORD常量。');

            // 清空表单
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
        });

        // 更新验证状态显示
        verifyStatus.textContent = '密码已更改，请重新验证';
        verifyStatus.style.color = 'orange';

        // 更新图片访问权限
        function updateImageAccess() {
            // 这个函数在首页使用，这里只是一个空函数占位
            // 实际功能应在首页实现
            console.log('更新图片访问权限');
        }

        // 解锁按钮点击事件
        document.addEventListener('DOMContentLoaded', function () {
            const lastHomePage = localStorage.getItem('lastHomePage');
            if (lastHomePage) {
                document.getElementById('homeLink').href = lastHomePage;
            }
        });

        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function () {
            // 设置首页链接
            const homeLink = document.getElementById('homeLink');
            const lastHomePage = localStorage.getItem('lastHomePage') || 'index.html';
            homeLink.href = lastHomePage;
        });
    </script>
</body>

</html>